---
layout:     post
title:      "ES6-review"
subtitle:   "ES6çŸ¥è¯†ç‚¹æ¸©ä¹ "
date:       2018-02-05 16:30:00
author:     "Mickey"
header-img: "img/post-bg-os-metro.jpg"
tags:
    - å‰ç«¯å¼€å‘
    - javaScript
---

ä¸€å¹´å‰ï¼Œç³»ç»Ÿå­¦ä¹ è¿‡ä¸€æ¬¡ES6è¯­æ³•ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œè®°å¿†æœ‰äº›æ¨¡ç³Šï¼ŒåŠ ä¹‹ä¸€å¹´çš„å·¥ä½œäº§å‡ºäº†ä¸€äº›æ²‰æ·€ï¼Œå› æ­¤ï¼Œå‡†å¤‡æ¸©ä¹ ä¸€éï¼Œè®°å½•ä¸€ä¸‹æ–°çš„ä½“ä¼šï¼Œå‚è€ƒä¹¦ç±ä¸ºé˜®ä¸€å³°è€å¸ˆçš„[ECMAScript 6 å…¥é—¨](http://es6.ruanyifeng.com/)ï¼Œæ„Ÿè°¢ğŸ™

* åœ¨ES5ä¸­ï¼Œvarå‘½ä»¤ä¼šå‘ç”Ÿâ€å˜é‡æå‡â€œç°è±¡ï¼Œå³å˜é‡å¯ä»¥åœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨ï¼Œå€¼ä¸ºundefinedï¼Œä¸ºäº†çº æ­£è¿™ç§ç°è±¡ï¼Œletå‘½ä»¤æ”¹å˜äº†è¯­æ³•è¡Œä¸ºï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡ä¸€å®šè¦åœ¨å£°æ˜åä½¿ç”¨ï¼Œå¦åˆ™æŠ¥é”™

	```js
	// var çš„æƒ…å†µ
	console.log(foo); // è¾“å‡ºundefined
	var foo = 2;
	
	// let çš„æƒ…å†µ
	console.log(bar); // æŠ¥é”™ReferenceError
	let bar = 2;
	```
	
* constå‘½ä»¤åªæ˜¯é™åˆ¶å˜é‡å¯¹åº”çš„åœ°å€ä¸å¯æ”¹å˜ï¼Œä½†å¯¹äºå¤åˆç±»å‹çš„æ•°æ®ï¼ˆä¸»è¦æ˜¯å¯¹è±¡å’Œæ•°ç»„ï¼‰ï¼Œå˜é‡æŒ‡å‘çš„å†…å­˜åœ°å€ï¼Œä¿å­˜çš„åªæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œconståªèƒ½ä¿è¯è¿™ä¸ªæŒ‡é’ˆæ˜¯å›ºå®šçš„ï¼Œè‡³äºå®ƒæŒ‡å‘çš„æ•°æ®ç»“æ„æ˜¯ä¸æ˜¯å¯å˜çš„ï¼Œå°±å®Œå…¨ä¸èƒ½æ§åˆ¶äº†ï¼Œå¦‚æœçœŸçš„æƒ³å°†å¯¹è±¡å†»ç»“ï¼Œåº”è¯¥ä½¿ç”¨Object.freezeæ–¹æ³•

	```js
	const foo = {};

	// ä¸º foo æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œå¯ä»¥æˆåŠŸ
	foo.prop = 123;
	foo.prop // 123
	
	// å°† foo æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¼šæŠ¥é”™
	foo = {}; // TypeError: "foo" is read-only
	
	var constantize = (obj) => {
	  Object.freeze(obj);
	  Object.keys(obj).forEach( (key, i) => {
	    if ( typeof obj[key] === 'object' ) {
	      constantize( obj[key] );
	    }
	  });
	};
	```

* è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼ï¼Œåªæœ‰åœ¨åŸæœ¬èµ‹å€¼ä¸å­˜åœ¨æˆ–è€…===undefinedçš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šä½¿ç”¨é»˜è®¤èµ‹å€¼ï¼Œä¾‹å¦‚ï¼ŒåŸæœ¬èµ‹å€¼ä¸ºnullï¼Œè§£æ„èµ‹å€¼ä¹Ÿä¸ä¼šé‡‡ç”¨é»˜è®¤å€¼

	```js
	let [x, y = 'b'] = ['a']; // x = 'a', y = 'b'
	let [x, y = 'b'] = ['a', undefined]; // x = 'a', y = 'b'
	let [x, y = 'b'] = ['a', null]; // x = 'a', y = null
	```

* jsä¸­ï¼Œå¯ä»¥ç”¨'\u0061'è¡¨ç¤ºUnicodeç å½¢å¼ï¼Œä½†æ˜¯ï¼Œè¿™ç§è¡¨ç¤ºæ³•åªé™äºç ç‚¹åœ¨\u0000~\uFFFFä¹‹é—´çš„å­—ç¬¦ã€‚è¶…å‡ºè¿™ä¸ªèŒƒå›´çš„å­—ç¬¦ï¼Œå¿…é¡»ç”¨ä¸¤ä¸ªåŒå­—èŠ‚çš„å½¢å¼è¡¨ç¤ºï¼ŒES6 å¯¹è¿™ä¸€ç‚¹åšå‡ºäº†æ”¹è¿›ï¼Œåªè¦å°†ç ç‚¹æ”¾å…¥å¤§æ‹¬å·ï¼Œå°±èƒ½æ­£ç¡®è§£è¯»è¯¥å­—ç¬¦

	```js
	"\u0061" // "a"
	"\uD842\uDFB7" // "ğ ®·"
	"\u20BB7" // " 7"
	"\u{20BB7}" // "ğ ®·"
	```

* ES5ä¸­æä¾›charCodeAtå’ŒString.fromCodeAtæ¥è¿›è¡Œç ç‚¹å’Œå¯¹åº”å­—ç¬¦çš„è½¬æ¢ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªapiä¸èƒ½è¯†åˆ« 32 ä½çš„ UTF-16 å­—ç¬¦ï¼ŒES6æ–°å¢äº†codePointAtå’ŒString.fromPointAtä¸¤ä¸ªAPIï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸¤ä¸ªAPIåˆ†åˆ«æ˜¯æŒ‚åœ¨å­—ç¬¦ä¸²å¯¹è±¡å’ŒStringä¸Šçš„ã€‚codePointAtæ–¹æ³•çš„å‚æ•°ï¼Œä»ç„¶æ˜¯ä¸æ­£ç¡®çš„ã€‚æ¯”å¦‚ï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦aåœ¨å­—ç¬¦ä¸²sçš„æ­£ç¡®ä½ç½®åºå·åº”è¯¥æ˜¯ 1ï¼Œä½†æ˜¯å¿…é¡»å‘codePointAtæ–¹æ³•ä¼ å…¥ 2ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªåŠæ³•æ˜¯ä½¿ç”¨for...ofå¾ªç¯ï¼Œå› ä¸ºå®ƒä¼šæ­£ç¡®è¯†åˆ« 32 ä½çš„ UTF-16 å­—ç¬¦

	```js
	var s = "ğ ®·a";
	s.charCodeAt(0) // 55362
	s.charCodeAt(1) // 57271
	s.codePointAt(0) // 134071
	s.codePointAt(1) // 57271
	s.codePointAt(2) // 97
	String.fromCharCode(0x20BB7) // "à®·"
	String.fromCodePoint(0x20BB7) // "ğ ®·"
	let s = 'ğ ®·a';
	for (let ch of s) {
	  console.log(ch.codePointAt(0).toString(16));
	}
	// 20bb7
	// 61
	```

* ES6å­—ç¬¦ä¸²æä¾›ä¸€ä¸ªrepeat()æ–¹æ³•ï¼Œå°†åŸå­—ç¬¦ä¸²é‡å¤næ¬¡

	```js
	'x'.repeat(3) // "xxx"
	'hello'.repeat(2) // "hellohello"
	'na'.repeat(0) // ""
	'na'.repeat(2.9) // "nana"
	```
	
* ES2017å¼•å…¥äº†å­—ç¬¦ä¸²è¡¥å…¨é•¿åº¦çš„åŠŸèƒ½ï¼Œæˆ‘ä¸ªäººè§‰å¾—è¿™ä¸ªåŠŸèƒ½éå¸¸æœ‰ç”¨ï¼Œå¦‚æœæŸä¸ªå­—ç¬¦ä¸²ä¸å¤ŸæŒ‡å®šé•¿åº¦ï¼Œä¼šåœ¨å¤´éƒ¨æˆ–å°¾éƒ¨è¡¥å…¨ï¼ŒpadStart()ç”¨äºå¤´éƒ¨è¡¥å…¨ï¼ŒpadEnd()ç”¨äºå°¾éƒ¨è¡¥å…¨

	```js
	'x'.padStart(5, 'ab') // 'ababx'
	'x'.padStart(4, 'ab') // 'abax'
	
	'x'.padEnd(5, 'ab') // 'xabab'
	'x'.padEnd(4, 'ab') // 'xaba'
	```
	
* ES6æ–°å¢äº†è¯†åˆ«å¤§äº\uFFFFå­—ç¬¦çš„æ–¹æ³•ï¼Œå¯¹åº”çš„ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æ–°å¢äº†ä¸€ä¸ªuçš„flagsï¼Œå«ä¹‰ä¸ºâ€œUnicode æ¨¡å¼â€ï¼Œç”¨æ¥æ­£ç¡®å¤„ç†å¤§äº\uFFFFçš„ Unicode å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¼šæ­£ç¡®å¤„ç†å››ä¸ªå­—èŠ‚çš„ UTF-16 ç¼–ç 

	```js
	/^\uD83D/u.test('\uD83D\uDC2A') // false
	/^\uD83D/.test('\uD83D\uDC2A') // true
	```

* ES6 è¿˜ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ·»åŠ äº†yä¿®é¥°ç¬¦ï¼Œå«åšâ€œç²˜è¿â€ï¼ˆstickyï¼‰ä¿®é¥°ç¬¦ã€‚
yä¿®é¥°ç¬¦çš„ä½œç”¨ä¸gä¿®é¥°ç¬¦ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å…¨å±€åŒ¹é…ï¼Œåä¸€æ¬¡åŒ¹é…éƒ½ä»ä¸Šä¸€æ¬¡åŒ¹é…æˆåŠŸçš„ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œgä¿®é¥°ç¬¦åªè¦å‰©ä½™ä½ç½®ä¸­å­˜åœ¨åŒ¹é…å°±å¯ï¼Œè€Œyä¿®é¥°ç¬¦ç¡®ä¿åŒ¹é…å¿…é¡»ä»å‰©ä½™çš„ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œè¿™ä¹Ÿå°±æ˜¯â€œç²˜è¿â€çš„æ¶µä¹‰

	```js
	var s = 'aaa_aa_a';
	var r1 = /a+/g;
	var r2 = /a+/y;
	
	r1.exec(s) // ["aaa"]
	r2.exec(s) // ["aaa"]
	
	r1.exec(s) // ["aa"]
	r2.exec(s) // null
	```

* æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œç‚¹ï¼ˆ.ï¼‰æ˜¯ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œä»£è¡¨ä»»æ„çš„å•ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªä¾‹å¤–ã€‚ä¸€ä¸ªæ˜¯å››ä¸ªå­—èŠ‚çš„ UTF-16 å­—ç¬¦ï¼Œè¿™ä¸ªå¯ä»¥ç”¨uä¿®é¥°ç¬¦è§£å†³ï¼›å¦ä¸€ä¸ªæ˜¯è¡Œç»ˆæ­¢ç¬¦ï¼ˆline terminator characterï¼‰ï¼Œ`ES2018` å¼•å…¥sä¿®é¥°ç¬¦ï¼Œä½¿å¾—.å¯ä»¥åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦

* æ­£åˆ™è¡¨è¾¾å¼å…·åç»„åŒ¹é…ï¼Œåœ¨ES5ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨åœ†æ‹¬å·è¿›è¡Œç»„åŒ¹é…ï¼Œç»„åŒ¹é…çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæ¯ä¸€ç»„çš„åŒ¹é…å«ä¹‰ä¸å®¹æ˜“çœ‹å‡ºæ¥ï¼Œè€Œä¸”åªèƒ½ç”¨æ•°å­—åºå·ï¼ˆæ¯”å¦‚matchObj[1]ï¼‰å¼•ç”¨ï¼Œè¦æ˜¯ç»„çš„é¡ºåºå˜äº†ï¼Œå¼•ç”¨çš„æ—¶å€™å°±å¿…é¡»ä¿®æ”¹åºå·ï¼Œ`ES2018`å¼•å…¥äº†å…·åç»„åŒ¹é…ï¼Œå…è®¸ä¸ºæ¯ä¸€ä¸ªç»„åŒ¹é…æŒ‡å®šä¸€ä¸ªåå­—ï¼Œæ—¢ä¾¿äºé˜…è¯»ä»£ç ï¼Œåˆä¾¿äºå¼•ç”¨ï¼Œå¦‚æœè¦åœ¨æ­£åˆ™è¡¨è¾¾å¼å†…éƒ¨å¼•ç”¨æŸä¸ªâ€œå…·åç»„åŒ¹é…â€ï¼Œå¯ä»¥ä½¿ç”¨\k<ç»„å>çš„å†™æ³•ï¼Œç±»ä¼¼äº\1çš„å†™æ³•ï¼Œè¿™ä¸¤ç§å†™æ³•å¯ä»¥å…¼å®¹ä¸€èµ·ä½¿ç”¨

	```js
	const RE_DATE = /(\d{4})-(\d{2})-(\d{2})/;

	const matchObj = RE_DATE.exec('1999-12-31');
	const year = matchObj[1]; // 1999
	const month = matchObj[2]; // 12
	const day = matchObj[3]; // 31
	
	const RE_DATE = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;

	const matchObj = RE_DATE.exec('1999-12-31');
	const year = matchObj.groups.year; // 1999
	const month = matchObj.groups.month; // 12
	const day = matchObj.groups.day; // 31

	const RE_TWICE = /^(?<word>[a-z]+)!\k<word>!\1$/;
	RE_TWICE.test('abc!abc!abc') // true
	RE_TWICE.test('abc!abc!ab') // false
	```

* ES6 æä¾›äº†äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶æ•°å€¼çš„æ–°çš„å†™æ³•ï¼Œåˆ†åˆ«ç”¨å‰ç¼€0bï¼ˆæˆ–0Bï¼‰å’Œ0oï¼ˆæˆ–0Oï¼‰è¡¨ç¤ºï¼Œå¦‚æœè¦å°†0bå’Œ0oå‰ç¼€çš„å­—ç¬¦ä¸²æ•°å€¼è½¬ä¸ºåè¿›åˆ¶ï¼Œè¦ä½¿ç”¨Numberæ–¹æ³•

	```js
	0b111110111 === 503 // true
	0o767 === 503 // true
	Number('0b111')  // 7
	Number('0o10')  // 8
	```

* ES6åœ¨Numberä¸ŠæŒ‚è½½äº†ä¸€äº›å…¨å±€æ–¹æ³•ï¼ŒåŒºåˆ«å¦‚ä¸‹

	* Number.isFinite() vs isFinite()

		isFinite()ä¼šå…ˆè°ƒç”¨Number()ï¼Œå†åˆ¤æ–­ï¼ŒNumber.isFinite()ç›´æ¥è¿›è¡Œåˆ¤æ–­
		
		```js
		isFinite('1') // true
		Number.isFinite('1') // false
		```
	
	* Number.isNaN() vs isNaN()

		å’ŒisFinite()ä¸€æ ·ï¼ŒisNaN()ä¼šå…ˆè°ƒç”¨Number()ï¼ŒNumber.isNaN()ç›´æ¥è¿›è¡Œåˆ¤æ–­
		
		```js
		isNaN('NaN') // true
		Number.isNaN('NaN') //  false
		```
	
	* Number.parseInt() å’Œ Number.parseFloat()å’Œå…¨å±€æ–¹æ³•å®Œå…¨ä¸€æ ·
	* Number.isInteger() åˆ¤æ–­æ˜¯å¦ä¸ºæ•´æ•°ï¼Œæ•°å­—å¤§äºNumber.MAX\_SAFE\_INTEGERæˆ–è€…æ•°å­—å°äºNumber.MIN_VALUEï¼Œä¼šå‡ºç°ç²¾åº¦ç¼ºå¤±ï¼Œç”±äºjsä¸­æ•´æ•°å’Œæµ®ç‚¹æ•°é‡‡ç”¨çš„æ˜¯åŒæ ·çš„å‚¨å­˜æ–¹æ³•ï¼Œæ‰€ä»¥ 25 å’Œ 25.0 è¢«è§†ä¸ºåŒä¸€ä¸ªå€¼

		```js
		Number.isInteger(25) // true
		Number.isInteger(25.0) // true
		Number.isInteger() // false
		Number.isInteger(null) // false
		Number.isInteger('15') // false
		Number.isInteger(true) // false
		```
	
	* Number.EPSILON å¯ä»¥è®¤ä¸ºæ˜¯jsçš„æœ€å°ç²¾åº¦
	* Number.MAX\_SAFE\_INTEGER/Number.MIN\_SAFE\_INGETERä»£è¡¨jsçš„ç²¾åº¦èŒƒå›´å†…çš„æœ€å¤§æ•´æ•°å’Œæœ€å°æ•´æ•°ï¼Œjsçš„å®‰å…¨èŒƒå›´æ˜¯-2^53åˆ°2^53ï¼Œä¸åŒ…å«ä¸¤ä¸ªç«¯ç‚¹
	* Number.isSafeInteger() æ•°å­—æ˜¯å¦å­˜åœ¨äºjsçš„æ•´æ•°å®‰å…¨èŒƒå›´å†…

* ES5ä¸­ï¼Œå¦‚æœè¦ç»™å‡½æ•°å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œä¸€èˆ¬æ˜¯ param || '' çš„æ–¹å¼ï¼Œè¿™æ ·å½“ä¼ å…¥boolå€¼ä¸ºfalseçš„å‚æ•°æ—¶ï¼Œéƒ½ä¼šé‡‡ç”¨é»˜è®¤å€¼ï¼Œå› æ­¤éœ€è¦å…ˆè¿›è¡Œundefinedçš„åˆ¤æ–­ï¼Œä¸æ˜¯éå¸¸æ–¹ä¾¿ï¼ŒES6ä¸­å¯ä»¥ç›´æ¥åœ¨å‚æ•°ä¸Šå†™é»˜è®¤å€¼ï¼Œæ¯•ç«Ÿæ–¹ä¾¿

* ES6å‡½æ•°é»˜è®¤å€¼ä¸è§£æ„èµ‹å€¼ç»“åˆä½¿ç”¨ï¼Œé¿å…å‡ºé”™

	```js
	function foo({x, y = 5}) {
	  console.log(x, y);
	}
	foo() // TypeError: Cannot read property 'x' of undefined
	
	function foo({x, y = 5} = {}) {
	  console.log(x, y);
	}
	
	foo() // undefined 5
	```

* ES6ä¸­ä¸ºå‡½æ•°çš„éå°¾éƒ¨å‚æ•°è®¾å®šé»˜è®¤å€¼çš„æ—¶å€™ï¼Œè‹¥è¦ä½¿ç”¨é»˜è®¤å€¼ï¼Œéœ€è¦æ˜¾ç¤ºçš„ä¼ å…¥undefinedï¼Œä¸ç„¶ä¼šæŠ¥é”™

	```js
	function f(x = 1, y) {
	  return [x, y];
	}
	
	f(, 1) // æŠ¥é”™
	f(undefined, 1) // [1, 1]
	```

* å°¾è°ƒç”¨

	ç®€å•æ¥è¯´ï¼Œå°¾è°ƒç”¨å°±æ˜¯ä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ï¼Œä¸‹æ–¹å¯¹å‡½æ•°må’Œnçš„è°ƒç”¨éƒ½å±äºå°¾è°ƒç”¨
	
	```js
	function f(x) {
	  if (x > 0) {
	    return m(x)
	  }
	  return n(x);
	}
	```
	
* å°¾è°ƒç”¨ä¼˜åŒ–

	å°¾è°ƒç”¨ä¹‹æ‰€ä»¥ä¸å…¶ä»–è°ƒç”¨ä¸åŒï¼Œå°±åœ¨äºå®ƒçš„ç‰¹æ®Šçš„è°ƒç”¨ä½ç½®ã€‚
	
	æˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°è°ƒç”¨ä¼šåœ¨å†…å­˜å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨è®°å½•â€ï¼Œåˆç§°â€œè°ƒç”¨å¸§â€ï¼ˆcall frameï¼‰ï¼Œä¿å­˜è°ƒç”¨ä½ç½®å’Œå†…éƒ¨å˜é‡ç­‰ä¿¡æ¯ã€‚å¦‚æœåœ¨å‡½æ•°Açš„å†…éƒ¨è°ƒç”¨å‡½æ•°Bï¼Œé‚£ä¹ˆåœ¨Açš„è°ƒç”¨å¸§ä¸Šæ–¹ï¼Œè¿˜ä¼šå½¢æˆä¸€ä¸ªBçš„è°ƒç”¨å¸§ã€‚ç­‰åˆ°Bè¿è¡Œç»“æŸï¼Œå°†ç»“æœè¿”å›åˆ°Aï¼ŒBçš„è°ƒç”¨å¸§æ‰ä¼šæ¶ˆå¤±ã€‚å¦‚æœå‡½æ•°Bå†…éƒ¨è¿˜è°ƒç”¨å‡½æ•°Cï¼Œé‚£å°±è¿˜æœ‰ä¸€ä¸ªCçš„è°ƒç”¨å¸§ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ‰€æœ‰çš„è°ƒç”¨å¸§ï¼Œå°±å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨æ ˆâ€ï¼ˆcall stackï¼‰ã€‚

	å°¾è°ƒç”¨ç”±äºæ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¸éœ€è¦ä¿ç•™å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå› ä¸ºè°ƒç”¨ä½ç½®ã€å†…éƒ¨å˜é‡ç­‰ä¿¡æ¯éƒ½ä¸ä¼šå†ç”¨åˆ°äº†ï¼Œåªè¦ç›´æ¥ç”¨å†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§å°±å¯ä»¥äº†ã€‚
	
	```js
	function f() {
	  let m = 1;
	  let n = 2;
	  return g(m + n);
	}
	f();
	
	// ç­‰åŒäº
	function f() {
	  return g(3);
	}
	f();
	
	// ç­‰åŒäº
	g(3);
	```
	
	ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå‡½æ•°gä¸æ˜¯å°¾è°ƒç”¨ï¼Œå‡½æ•°få°±éœ€è¦ä¿å­˜å†…éƒ¨å˜é‡må’Œnçš„å€¼ã€gçš„è°ƒç”¨ä½ç½®ç­‰ä¿¡æ¯ã€‚ä½†ç”±äºè°ƒç”¨gä¹‹åï¼Œå‡½æ•°få°±ç»“æŸäº†ï¼Œæ‰€ä»¥æ‰§è¡Œåˆ°æœ€åä¸€æ­¥ï¼Œå®Œå…¨å¯ä»¥åˆ é™¤f(x)çš„è°ƒç”¨å¸§ï¼Œåªä¿ç•™g(3)çš„è°ƒç”¨å¸§
	
* ES6ä¸­è§„å®šï¼Œå‡½æ•°å¾ªç¯è°ƒç”¨è‡ªå·±ï¼Œå¿…é¡»å†™æˆå°¾å¾ªç¯å½¢å¼ï¼Œè¿™æ ·åªéœ€è¦ä¿å­˜ä¸€ä¸ªè°ƒç”¨å¸§ï¼Œå¦åˆ™éœ€è¦ä¿å­˜éå¸¸å¤šçš„è°ƒç”¨å¸§ï¼Œå®¹æ˜“å‘ç”Ÿstack overflow[å°¾é€’å½’ä¼˜åŒ–](http://es6.ruanyifeng.com/#docs/function#%E5%B0%BE%E8%B0%83%E7%94%A8%E4%BC%98%E5%8C%96)

* `ES2017`å…è®¸å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°åé¢åŠ ä¸Šé€—å·
    
* å’Œä¸Šé¢ä¸€æ ·ï¼ŒES6å¢åŠ äº†å¯¹4å­—èŠ‚unicodeçš„æ”¯æŒï¼Œä½†æ˜¯ES5ä¸­ï¼Œå­—ç¬¦ä¸²lengthå’Œreverse()éƒ½ä¸èƒ½æ­£ç¡®è¯†åˆ«4å­—èŠ‚unicodeï¼ŒES6å¯ä»¥é€šè¿‡...è¿ç®—ç¬¦å°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„æ¥æ­£ç¡®è¯†åˆ«

    ```js
    'x\uD83D\uDE80y'.length // 4
    [...'x\uD83D\uDE80y'].length // 3 

    let str = 'x\uD83D\uDE80y';

    str.split('').reverse().join('')
    // 'y\uDE80\uD83Dx'

    [...str].reverse().join('')
    // 'y\uD83D\uDE80x'
    ```

* ES6ä¸­æ–°å¢äº†Array.from()æ–¹æ³•ï¼Œç”¨äºå°†ç±»æ•°ç»„è½¬ä¸ºæ•°ç»„ï¼Œç¬¬äºŒä¸ªå‚æ•°ç±»ä¼¼mapæ–¹æ³•ï¼Œæ“ä½œæ•°ç»„ä¸­çš„å…ƒç´ å¹¶ä¸”è¿”å›ï¼Œè¿™å®é™…ä¸Šæ„å‘³ç€ï¼Œåªè¦æœ‰ä¸€ä¸ªåŸå§‹çš„æ•°æ®ç»“æ„ï¼Œä½ å°±å¯ä»¥å…ˆå¯¹å®ƒçš„å€¼è¿›è¡Œå¤„ç†ï¼Œç„¶åè½¬æˆè§„èŒƒçš„æ•°ç»„ç»“æ„ï¼Œè¿›è€Œå°±å¯ä»¥ä½¿ç”¨æ•°é‡ä¼—å¤šçš„æ•°ç»„æ–¹æ³•

    ```
    let spans = document.querySelectorAll('span.name');

    // map()
    let names1 = Array.prototype.map.call(spans, s => s.textContent);

    // Array.from()
    let names2 = Array.from(spans, s => s.textContent)

    Array.from({ length: 2 }, () => 'jack')
    // ['jack', 'jack']
    ```

* ES6ä¸­æ–°å¢äº†find()å’ŒfindIndex()æ–¹æ³•ï¼Œå‡æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ç¬¬ä¸€ä¸ªä¸ºtrueçš„æ•°ç»„æˆå‘˜å’Œæˆå‘˜indexï¼ŒES5ä¸­çš„indexOf()æ–¹æ³•ä¸èƒ½è¯†åˆ«NaNï¼Œä½†æ˜¯findIndexå¯ä»¥å€ŸåŠ©Object.is()è¿›è¡Œæ“ä½œ

    ```js
    [1, 5, 10, 15].find(function(value, index, arr) {
        return value > 9;
    }) // 10
    
    [1, 5, 10, 15].findIndex(function(value, index, arr) {
        return value > 9;
    }) // 2
    
    [NaN].indexOf(NaN)
    // -1

    [NaN].findIndex(y => Object.is(NaN, y))
    // 0
    ```

* ES5ä¸­new Array(3)ä¼šå¾—åˆ°[empty * 3]ï¼ŒES6ä¸­æ•°ç»„å¤šäº†ä¸€ä¸ªfillæ–¹æ³•ï¼Œå¯ä»¥ç”¨äºåˆå§‹åŒ–ç©ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥ç”¨äºæŠ¹å»æ•°ç»„ä¸­ç°æœ‰çš„å…ƒç´ ï¼Œfill(num, beginIndex, endIndex)

    ```js
    new Array(3).fill(3) // [3, 3, 3]
    [1, 2, 3].fill(1, 1, 2) // [1, 1, 3]
    ```

* ES5ä¸­åœ¨{}ä¸­å¯¹å¯¹è±¡è¿›è¡Œèµ‹å€¼åªèƒ½ä½¿ç”¨æ ‡è¯†ç¬¦ï¼Œåœ¨ES6ä¸­ï¼Œå¯ä»¥é€šè¿‡è¡¨è¾¾å¼æ¥å¯¹å¯¹è±¡è¿›è¡Œèµ‹å€¼ï¼Œæ³¨æ„ï¼Œå±æ€§åè¡¨è¾¾å¼ä¸ç®€æ´è¡¨ç¤ºæ³•ï¼Œä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œä¼šæŠ¥é”™

    ```js
    let propKey = 'foo';

    let obj = {
        [propKey]: true,
        ['a' + 'bc']: 123
    };

    // æŠ¥é”™
    const foo = 'bar';
    const bar = 'abc';
    const baz = { [foo] };

    // æ­£ç¡®
    const foo = 'bar';
    const baz = { [foo]: 'abc'};
    ```

* ES5ä¸­ä¸¥æ ¼æ¨¡å¼NaN === NaNä¸ºfalseï¼Œ+0 === -0ä¸ºtrueï¼Œä¸ºäº†åŒºåˆ†è¿™ç§ç°è±¡ï¼ŒES6æ–°å¢äº†Object.is()æ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­ä¸¤ä¸ªå‚æ•°æ˜¯å¦ç›¸ç­‰

* `ES2018`ä¸­å°†æ•°ç»„ä¸­...è¿ç®—ç¬¦å¼•å…¥äº†å¯¹è±¡ï¼Œæ‰©å±•è¿ç®—ç¬¦çš„è§£æ„èµ‹å€¼ï¼Œä¸èƒ½å¤åˆ¶ç»§æ‰¿è‡ªåŸå‹å¯¹è±¡çš„å±æ€§

    ```js
    let o1 = { a: 1 };
    let o2 = { b: 2 };
    o2.__proto__ = o1;
    let { ...o3 } = o2;
    o3 // { b: 2 }
    o3.a // undefined
    ```

* ES6ä¸­çš„setä½¿ç”¨çš„æ˜¯Object.is()åˆ¤æ–­æ˜¯å¦ç›¸åŒæ¥å»é‡çš„ï¼Œæ‰€ä»¥5å’Œ"5"æ˜¯ä¸åŒçš„ï¼ŒNaNå’ŒNaNæ˜¯ç›¸åŒçš„ï¼Œå¯¹è±¡éƒ½æ˜¯ä¸åŒçš„ï¼Œæ¯•ç«Ÿåœ°å€ä¸åŒ

* ES6çš„setçš„keysï¼Œvaluesè¿”å›ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œå…¶å®setè‡ªå¸¦Iteratorå±æ€§ï¼Œå¯ä»¥ç›´æ¥for...of...éå†

* ES6çš„mapå’Œsetä¸€æ ·ï¼Œå¯¹è±¡æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸¤ä¸ªä¸åŒåœ°å€çš„å¯¹è±¡ä½œä¸ºkeyå–åˆ°çš„æ˜¯ä¸ä¸€æ ·çš„value

* ES6æ–°å¢äº†Symbolè¿™ç§åŸºæœ¬ç±»å‹ï¼Œä½œä¸ºå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¸¤ä¸ªSymbol()æ˜¯ä¸ç›¸ç­‰çš„ï¼Œä¸¤ä¸ªSymbol('value')ä¹Ÿæ˜¯ä¸ç›¸ç­‰çš„ï¼Œå¦‚æœæƒ³è¦ä¸¤ä¸ªSymbolç›¸ç­‰ï¼Œå¯ä»¥ä½¿ç”¨Symbol.for()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåœ¨å…¨å±€æ³¨å†Œï¼Œå†æ¬¡èµ‹å€¼çš„æ—¶å€™ä¼šå»å…¨å±€æŸ¥æ‰¾ï¼ŒSymbol.keyFor()æ–¹æ³•å¯ä»¥çŸ¥é“Symbol.for()æ–¹æ³•çš„å‚æ•°

    ```js
    let s = Symbol()
    typeof s // symbol
    Symbol() === Symbol() // false
    Symbol('a') === Symbol('a') // false
    Symbol.for('a') === Symbol.for('a') // true
    Symbol.keyFor(Symbol()) // undefined
    Symbol.keyFor(Symbol.for('s')) // "s"
    ```

* åœ¨å¯¹è±¡ä¸­ä½¿ç”¨Symbolä½œä¸ºå”¯ä¸€keyï¼Œè¦ç”¨[]èµ‹å€¼ï¼Œå› ä¸ºç‚¹è¿ç®—ç¬¦ä¼šè¢«è®¤ä¸ºæ˜¯å­—ç¬¦ä¸²

* å››ä¸ªæ“ä½œä¼šå¿½ç•¥enumerableä¸ºfalseçš„å±æ€§

    * for...inå¾ªç¯ï¼šåªéå†å¯¹è±¡è‡ªèº«çš„å’Œç»§æ‰¿çš„å¯æšä¸¾çš„å±æ€§
    * Object.keys()ï¼šè¿”å›å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å¯æšä¸¾çš„å±æ€§çš„é”®å
    * JSON.stringify()ï¼šåªä¸²è¡ŒåŒ–å¯¹è±¡è‡ªèº«çš„å¯æšä¸¾çš„å±æ€§
    * Object.assign()ï¼š å¿½ç•¥enumerableä¸ºfalseçš„å±æ€§ï¼Œåªæ‹·è´å¯¹è±¡è‡ªèº«çš„å¯æšä¸¾çš„å±æ€§

* ES6 ä¸€å…±æœ‰ 5 ç§æ–¹æ³•å¯ä»¥éå†å¯¹è±¡çš„å±æ€§

    * for...inå¾ªç¯éå†å¯¹è±¡è‡ªèº«çš„å’Œç»§æ‰¿çš„å¯æšä¸¾å±æ€§ï¼ˆä¸å« Symbol å±æ€§ï¼‰
    * Object.keysè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…æ‹¬å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼ˆä¸å« Symbol å±æ€§ï¼‰çš„é”®å
    * Object.getOwnPropertyNamesè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§ï¼ˆä¸å« Symbol å±æ€§ï¼Œä½†æ˜¯åŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ï¼‰çš„é”®å
    * Object.getOwnPropertySymbolsè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰ Symbol å±æ€§çš„é”®å
    * Reflect.ownKeysè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰é”®åï¼Œä¸ç®¡é”®åæ˜¯ Symbol æˆ–å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸ç®¡æ˜¯å¦å¯æšä¸¾
    * ä»¥ä¸Šçš„ 5 ç§æ–¹æ³•éå†å¯¹è±¡çš„é”®åï¼Œéƒ½éµå®ˆåŒæ ·çš„å±æ€§éå†çš„æ¬¡åºè§„åˆ™ï¼Œé¦–å…ˆéå†æ‰€æœ‰æ•°å€¼é”®ï¼ŒæŒ‰ç…§æ•°å€¼å‡åºæ’åˆ—ï¼›å…¶æ¬¡éå†æ‰€æœ‰å­—ç¬¦ä¸²é”®ï¼ŒæŒ‰ç…§åŠ å…¥æ—¶é—´å‡åºæ’åˆ—ï¼›æœ€åéå†æ‰€æœ‰ Symbol é”®ï¼ŒæŒ‰ç…§åŠ å…¥æ—¶é—´å‡åºæ’åˆ—

* ES6ä¸­Reflectå¯¹è±¡ä¸Šçš„é™æ€æ–¹æ³•

    * Reflect.apply(target, thisArg, args)ï¼Œç»‘å®šthiså¯¹è±¡åæ‰§è¡Œç»™å®šå‡½æ•°
        
        ```js
        const ages = [11, 33, 12, 54, 18, 96];

        // æ—§å†™æ³•
        const youngest = Math.min.apply(Math, ages);
        const oldest = Math.max.apply(Math, ages);
        const type = Object.prototype.toString.call(youngest);

        // æ–°å†™æ³•
        const youngest = Reflect.apply(Math.min, Math, ages);
        const oldest = Reflect.apply(Math.max, Math, ages);
        const type = Reflect.apply(Object.prototype.toString, youngest, []);
        ```

    * Reflect.construct(target, args)ï¼Œç­‰åŒäºnew target(...args)ï¼Œè¿™æä¾›äº†ä¸€ç§ä¸ä½¿ç”¨newï¼Œæ¥è°ƒç”¨æ„é€ å‡½æ•°çš„æ–¹æ³•

        ```js
        function Greeting(name) {
            this.name = name;
        }

        // new çš„å†™æ³•
        const instance = new Greeting('å¼ ä¸‰');

        // Reflect.construct çš„å†™æ³•
        const instance = Reflect.construct(Greeting, ['å¼ ä¸‰']);
        ```

    * Reflect.get(target, name, receiver)ï¼ŒæŸ¥æ‰¾å¹¶è¿”å›targetå¯¹è±¡çš„nameå±æ€§ï¼Œå¦‚æœæ²¡æœ‰è¯¥å±æ€§ï¼Œåˆ™è¿”å›undefinedï¼Œå¦‚æœnameå±æ€§éƒ¨ç½²äº†è¯»å–å‡½æ•°ï¼ˆgetterï¼‰ï¼Œåˆ™è¯»å–å‡½æ•°çš„thisç»‘å®šreceiver

        ```js
        var myObject = {
            foo: 1,
            bar: 2,
        }
        Reflect.get(myObject, 'foo') // 1
        Reflect.get(myObject, 'bar') // 2

        var myObject = {
            foo: 1,
            bar: 2,
            get baz() {
                return this.foo + this.bar;
            },
        };

        var myReceiverObject = {
            foo: 4,
            bar: 4,
        };

        Reflect.get(myObject, 'baz', myReceiverObject) // 8
        ```

    * Reflect.set(target, name, value, receiver)ï¼Œè®¾ç½®targetå¯¹è±¡çš„nameå±æ€§ç­‰äºvalueï¼Œæ³¨æ„ï¼Œå¦‚æœ Proxy å¯¹è±¡å’Œ Reflect å¯¹è±¡è”åˆä½¿ç”¨ï¼Œå‰è€…æ‹¦æˆªèµ‹å€¼æ“ä½œï¼Œåè€…å®Œæˆèµ‹å€¼çš„é»˜è®¤è¡Œä¸ºï¼Œè€Œä¸”ä¼ å…¥äº†receiverï¼Œé‚£ä¹ˆReflect.setä¼šè§¦å‘Proxy.definePropertyæ‹¦æˆª

        ```js
        let p = {
            a: 'a'
        };

        let handler = {
            set(target, key, value, receiver) {
                console.log('set');
                Reflect.set(target, key, value, receiver)
            },
            defineProperty(target, key, attribute) {
                console.log('defineProperty');
                Reflect.defineProperty(target, key, attribute);
            }
        };

        let obj = new Proxy(p, handler);
        obj.a = 'A';
        // set
        // defineProperty
        ```

    * Reflect.defineProperty(target, name, desc)ï¼Œå’ŒObject.definePropertç”¨æ³•ä¸€æ ·
    * Reflect.deleteProperty(target, name)ï¼Œåˆ é™¤å¯¹è±¡å±æ€§ï¼Œç±»ä¼¼ä¸delete obj.param
    
        ```js
        let a = {
            name: 'snowwinter',
        }
        Reflect.deleteProperty(a, 'name')
        ```

    * Reflect.has(target, name)ï¼Œåˆ¤æ–­å±æ€§æ˜¯å¦å­˜åœ¨äºå¯¹è±¡ä¹‹ä¸­
        
        ```js
        let a = {
            name: 'snowwinter',
        }
        'name' in a // true
        Reflect.has(a, 'name') // true
        ```

    * Reflect.ownKeys(target)ï¼Œè¿”å›å¯¹è±¡æ‰€æœ‰çš„é”®åï¼ŒåŒ…æ‹¬ä¸å¯æšä¸¾çš„ä»¥åŠSymbolå¯¹è±¡
        
        ```js
        var myObject = {
            foo: 1,
            bar: 2,
            [Symbol.for('baz')]: 3,
            [Symbol.for('bing')]: 4,
        };

        // æ—§å†™æ³•
        Object.getOwnPropertyNames(myObject)
        // ['foo', 'bar']

        Object.getOwnPropertySymbols(myObject)
        //[Symbol(baz), Symbol(bing)]

        // æ–°å†™æ³•
        Reflect.ownKeys(myObject)
        // ['foo', 'bar', Symbol(baz), Symbol(bing)]
        ```

    * Reflect.isExtensible(target)ï¼Œå¯¹åº”Object.isExtensibleï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰å¯¹è±¡æ˜¯å¦å¯æ‰©å±•

        ```js
        const myObject = {};

        // æ—§å†™æ³•
        Object.isExtensible(myObject) // true

        // æ–°å†™æ³•
        Reflect.isExtensible(myObject) // true

        Object.isExtensible(1) // false
        Reflect.isExtensible(1) // æŠ¥é”™
        ```

    * Reflect.preventExtensions(target)ï¼Œå¯¹åº”Object.preventExtensionsæ–¹æ³•ï¼Œç”¨äºè®©ä¸€ä¸ªå¯¹è±¡å˜ä¸ºä¸å¯æ‰©å±•ã€‚å®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ“ä½œæˆåŠŸ
    * Reflect.getOwnPropertyDescriptor(target, name)ï¼Œå’ŒObject.getOwnPropertyDescriptorä¸€æ ·
    * Reflect.getPrototypeOf(target)ï¼Œå’ŒObject.getPrototypeOfä¸€æ ·ï¼Œç”¨äºè·å–å¯¹è±¡çš„\_\_proto\_\_
    * Reflect.setPrototypeOf(target, prototype)ï¼Œå’ŒObject.setPrototypeOfä¸€æ ·ï¼ŒåŒäºè®¾ç½®å¯¹è±¡çš„\_\_proto\_\_
